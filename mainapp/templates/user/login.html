<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>login</title>
</head>
<body>
    <h1>登陆</h1>
    <h3>{{base_url}}</h3>
    <ul>
        {% for key,value in cookies.items() %}
            <li>{{key}}:{{value}}</li>
        {% endfor %}
    </ul>
    <form name="login_form" action="/user/login" method="post">
        <input name="phone" placeholder="手机号"><br>
        <input type="password" name="passwd" placeholder="口令"><br>
        <button>登陆</button><a href="#">没有账号先注册</a>
    </form>
    <div id="val_info" style="color:red">
        {{msg}}
    </div>

    <script>
        function $(id){
            return document.getElementById(id);
        }
        //设置表单提交函数
        document.forms[0].onsubmit=function(ev){
            //console.log(this);
            //alert(this);
            //判断手机号
            if(! /\d{11}/.test(this.phone.value)){
                $('val_info').innerHTML='手机号必须11位';
                return false
            }
            //判断密码
            if(! /\w{6,}/.test(this.passwd.value)){
                console.log(this.passwd.value);
                $('val_info').innerHTML='口令格式不对';
                return false
            }
            //刷新后清空原有提示
            //$('val_info').innerHTML=''

            //禁止提交
            //return false;
        }
    </script>
</body>
</html>